!function(a) {
    a.fn.brickWork = function(b) {
        b = a.extend({
            itemSelector: ".grid-item",
            widthImgMin: 250,
            widthGutter: 15,
            border: "none",
            shadow: "none",
            background: "#F5F5F5",
            transition: "opacity 0.5s linear"
        }, b);
        var c = this, d = c.width(), e = c.find(b.itemSelector), f = Math.floor(d / b.widthImgMin), g = Math.floor((d - b.widthGutter * (f - 1)) / f), h = [];
        for (i = 0; i < f; i++) h[i] = b.widthGutter;
        var j = b.widthGutter, k = b.widthGutter, l = 0, m = 0, n = 0;
        c.css({
            position: "relative"
        }), a.each(e, function(c, d) {
            var e = a(d), i = "cl" + c;
            if ($images = e.children("img"), !$images.hasClass("new-image")) {
                var o = Math.floor(g * ($images.prop("naturalHeight") / $images.prop("naturalWidth")));
                for (e.addClass("cl" + c), jk = 0; jk < f; jk++) h[jk] < h[l] && (k = h[jk], l = jk);
                n = k, m = (g + j) * l, a("." + i).css({
                    position: "absolute",
                    top: n,
                    left: m,
                    width: g,
                    height: o,
                    border: b.border,
                    boxShadow: b.shadow
                }), h[l] = k + o + j, k = h[l];
            }
        });
        var o = function(a) {
            return Math.max.apply(Math, a);
        }(h);
        return c.css({
            height: o,
            opacity: 1,
            transition: b.transition,
            background: b.background
        }), this;
    };
}(jQuery), $(function() {
    function a(a, b) {
        var c = a - .5 + Math.random() * (b - a + 1);
        return c = Math.round(c);
    }
    $.support.cors = !0;
    var b = {
        widthImgMin: 270,
        widthGutter: 15,
        background: "#E6E6FA",
        transition: "opacity 0.2s ease"
    }, c = [ "Sport+and+Activity", "Beauty+and+Health", "Extreme+Sports", "Games", "Culture+and+Education", "Relaxation", "Travelling", "Dansing", "Swiming", "Running", "Programming", "Study" ];
    !function(c, d) {
        d && void 0 !== d && d.preventDefault(), $(".grid").replaceWith('<div class="grid"></div>');
        var e = c.length, f = function(a) {
            if (!e && !a.find("img.new-image").length && !a.hasClass("initialized")) {
                a.addClass("initialized");
                var c = a.brickWork(b);
            }
            console.log(c);
        }, g = function(a, b) {
            a.removeClass("new-image"), f(b);
        };
        c.forEach(function(b, c, d) {
            var h = d[c].replace(/\+/gi, " "), i = "https://pixabay.com/api/?key=4534315-1446b5ff2fa21aef31d1c4233&image_type=photo&per_page=3&q=" + b, j = $(".grid");
            $.ajax({
                url: i,
                datatype: "jsonp",
                success: function(b) {
                    var c = b.hits;
                    if (0 !== c.length) {
                        var d = a(1, c.length) - 1, e = c[d].webformatURL;
                        $('<div class="grid-item"><img class="new-image" src=' + e + "/><a>" + h + "</a></div>").appendTo(j), 
                        j.find("img.new-image").on("load", function() {
                            g($(this), j);
                        }).on("error", function() {
                            g($(this), j);
                        });
                    }
                },
                complete: function() {
                    e--, f($(".grid"));
                }
            });
        });
    }(c), $(window).resize(function() {
        $(".grid").brickWork(b);
    });
});